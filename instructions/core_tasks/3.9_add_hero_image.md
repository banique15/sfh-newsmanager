---
blueprint_section: "3.9"
difficulty: medium
requires_confirmation: yes
channels: all
required_tools: [intent_detection, context_resolution, article_search, image_generation, image_storage, article_crud, yes_no_prompt, conversation_memory]
---

# Add a Hero Image to an Article That Already Exists

## Overview

User asks to add or change the hero image for an existing article (e.g., "Add a hero image to the summer event article", "Generate an image for it and set it as the hero").

So we don't create a new article; we update the right one with a new image and optionally generate that image first.

## Why This Approach

We update an existing article's image field, so we need to identify the right article and confirm before making changes to prevent modifying the wrong content.

## Prerequisites

- **Required tools:**
  - `intent_detection` - Parse request
  - `context_resolution` - Resolve "it", "that article"
  - `article_search` - Find article by title/topic
  - `image_generation` - Create image if needed
  - `image_storage` - Upload and get URL
  - `article_crud` - Update hero_image_url field
  - `yes_no_prompt` - Get approval
  - `conversation_memory` - Track updated article
  
- **Required context:**
  - Which article
  - Image source (generate or user provides URL)

## Step-by-Step Procedure

### 1. **Identify the Article**

**Action:** Resolve which article they mean from title or context.

**Tool(s) used:** `intent_detection`, `context_resolution`, `article_search`

**Resolution strategies:**
1. **Explicit title** - "Add image to 'Summer Concert 2026'"
2. **Context reference** - "Add an image to it" → conversation memory
3. **Topic reference** - "Add image to the gala article" → search

**If multiple match:** Follow [4.2_multiple_matches.md](../edge_cases/4.2_multiple_matches.md)

**If unclear:** Follow [3.10_clarification.md](3.10_clarification.md)

---

### 2. **Generate the Image (if Requested)**

**Action:** If they want us to generate the image, create it from description (theirs or inferred from article).

**Tool(s) used:** `image_generation`, `image_storage`

**Two scenarios:**

**A. User requests generation:**
- "Generate a hero image for the summer concert article"
- Create description from article content
- Generate image
- Upload and get URL

**B. User provides URL:**
- "Set the hero image to https://example.com/image.jpg"
- Skip generation, use provided URL

**If description unclear:** Ask "What should the image show?"

---

### 3. **Propose the Update**

**Action:** Say we'll set the hero image for that article and offer Yes/Cancel.

**Tool(s) used:** `yes_no_prompt`

**Message format:**
```
I'll set the hero image for '[ARTICLE_TITLE]' to:

[Image preview if available]
[URL]

Is this correct?
```

**Options:** [Yes] [Cancel]

**Example:**
> "I'll set the hero image for 'Summer Concert Series 2026' to the new image I generated. Is this correct?"
> 
> [Image preview]
> 
> [Yes] [Cancel]

---

### 4. **Apply Only After Confirmation**

**Action:** Update the article's hero_image_url field.

**Tool(s) used:** `article_crud`

**On Yes:**
```json
{
  "operation": "update",
  "article_id": "[resolved ID]",
  "hero_image_url": "[new URL]"
}
```

**On Cancel:** Follow [3.12_user_cancels.md](3.12_user_cancels.md)

---

### 5. **Confirm the Result**

**Action:** Tell them the hero image was updated.

**Success message:**
```
✅ Updated the hero image for '[ARTICLE_TITLE]'.

[Link to article if available]
```

**Example:**
> "✅ Updated the hero image for 'Summer Concert Series 2026'. The article now has the new hero image!"

**Store in memory:** Updated article for follow-ups

---

## Expected Outcome

The existing article now has the new hero image URL set; user confirmed the change and received confirmation.

## Error Handling

| Error Scenario | Response |
|---------------|----------|
| **Can't identify article** | "Which article should I add the image to?" (see 3.10) |
| **Multiple matches** | "Which one? 1. [title] 2. [title]..." (see 4.2) |
| **Image generation failed** | "I couldn't generate the image. Want to try with a different description or provide an image URL?" |
| **Upload failed** | "The image didn't upload. Want to try again?" |
| **Update failed** | "Something went wrong updating the article. Please try again." |
| **User cancels** | "No problem. The article's image wasn't changed." (see 3.12) |

## Cross-References

### Related Instructions
- [3.4_update_content.md](3.4_update_content.md) - General update flow
- [3.8_generate_image_standalone.md](3.8_generate_image_standalone.md) - Generate image separately
- [3.10_clarification.md](3.10_clarification.md) - When unclear
- [3.13_follow_up_context.md](3.13_follow_up_context.md) - "Add an image to it"

### Edge Cases
- [4.2_multiple_matches.md](../edge_cases/4.2_multiple_matches.md) - Multiple articles match

### Tools
- [article_crud.json](../../tools/content_tools/article_crud.json) - Update operation
- [image_generation.json](../../tools/ai_tools/image_generation.json) - Generate image
- [image_storage.json](../../tools/media_tools/image_storage.json) - Upload image
