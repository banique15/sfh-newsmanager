---
blueprint_section: "3.1"
difficulty: hard
requires_confirmation: yes
channels: all
required_tools: [intent_detection, content_generation, image_generation, article_crud, image_storage, image_linking, yes_no_prompt, conversation_memory]
---

# Create Newsletter/Full Article (with Optional Image)

## Overview

User asks to create a new article, newsletter, or blog post with optional hero image (e.g., "Create an article about the summer concert with a hero image").

This is the complete newsletter creation flow including content generation and optional image creation.

## Why This Approach

Publishable content needs a clear sequence: draft text, optional image, save, quick review, then confirm to the user. Doing it in order avoids missing steps and gives one clear outcome.

## Prerequisites

- **Required tools:**
  - `intent_detection` - Parse user request
  - `content_generation` - Generate article content
  - `image_generation` - Generate hero image if requested
  - `article_crud` - Save article to database
  - `image_storage` - Upload and store image
  - `image_linking` - Link image to article
  - `yes_no_prompt` - Generate confirmation UI
  - `conversation_memory` - Store reference for follow-ups
  
- **Required context:**
  - Article topic
  - Whether image is requested
  
- **Channel considerations:**
  - Works across all channels
  - Image preview shown where supported (Slack, Portal)

## Step-by-Step Procedure

### 1. **Understand the Request**

**Action:** Parse user message to extract topic, tone, and whether they want an image.

**Tool(s) used:** `intent_detection`

**Extract:**
- Topic (required)
- Image requested (yes/no)
- Tone/style preferences
- Specific details (dates, names, etc.)

**If unclear:** Follow [3.10_clarification.md](3.10_clarification.md)

---

### 2. **Draft the Content**

**Action:** Generate headline, body text, and excerpt.

**Tool(s) used:** `content_generation`

**Output:** Article JSON with title, content, excerpt

**Example reference:** [article_generation.md](../../examples/prompts/article_generation.md)

---

### 3. **Create Media if Requested**

**Action:** If user requested an image, generate it from description tied to the article.

**Tool(s) used:** `image_generation`, `image_storage`

**If image NOT requested:** Skip to step 4

**If image requested:**
1. Generate image description from article topic
2. Create image using AI
3. Upload to storage and get permanent URL

---

### 4. **Store Everything**

**Action:** Save article (and link image if created) to database.

**Tool(s) used:** `article_crud`, `image_linking`

**Parameters:**
```json
{
  "operation": "create",
  "title": "[generated]",
  "content": "[generated]",
  "excerpt": "[generated]",
  "status": "draft",
  "hero_image_url": "[image URL or null]",
  "author": "Newsletter Manager Bot"
}
```

**Default status:** draft (unless user explicitly requests published)

---

### 5. **Review Before "Done"**

**Action:** Quick internal check that draft matches request and reads well.

**Verify:**
- Title is compelling
- Content addresses topic
- Image (if created) is appropriate
- All fields populated correctly

---

### 6. **Tell the User It's Done**

**Action:** Confirm creation with preview and next steps.

**Message format:**
```
âœ… Created '[TITLE]' as a draft.

[If image: Show image preview and URL]
[Link to article if available]

You can publish it, edit it, or make changes.
```

**Store in memory:** Article ID and title for follow-up references

---

## Expected Outcome

- New draft article exists in database
- Optional hero image generated and linked
- User receives clear confirmation with preview/link
- Article stored in conversation memory for "publish it", "edit it" follow-ups

## Error Handling

| Error Scenario | Response |
|---------------|----------|
| **Topic unclear** | "What should the article be about?" (see 3.10) |
| **Image gen failed, article saved** | "Article created, but image didn't generate. Here's the article link. Want to try adding an image again?" |
| **Article saved, image upload failed** | "Article created, but image didn't upload. Here's the article: [link]. You can try adding an image separately." |
| **Full save failed** | "Something went wrong creating the article. Please try again or rephrase your request." |
| **Duplicate title** | Follow [4.1_duplicate_titles.md](../edge_cases/4.1_duplicate_titles.md) |

## Cross-References

### Related Instructions
- [3.2_create_article_simple.md](3.2_create_article_simple.md) - Simplified flow without image
- [3.8_generate_image_standalone.md](3.8_generate_image_standalone.md) - Image-only generation
- [3.10_clarification.md](3.10_clarification.md) - When details unclear

### Edge Cases
- [4.1_duplicate_titles.md](../edge_cases/4.1_duplicate_titles.md) - Similar title exists
- [4.8_partial_failure.md](../edge_cases/4.8_partial_failure.md) - Partial operation failure

### Examples
- [draft_article.json](../../examples/articles/draft_article.json)
- [published_article.json](../../examples/articles/published_article.json)
- [article_generation.md](../../examples/prompts/article_generation.md)

### Tools
- [article_crud.json](../../tools/content_tools/article_crud.json)
- [tool_registry.json](../../tools/tool_registry.json)
